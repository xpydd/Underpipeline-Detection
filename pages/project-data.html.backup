<!DOCTYPE html>
<html class="" lang="zh-CN">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>项目数据 - 管网智慧探测系统</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        primary: "#5ad98b",
                        "background-light": "#f6f8f7",
                        "background-dark": "#131f18"
                    },
                    fontFamily: {
                        display: ["Inter", "PingFang SC", "Microsoft YaHei", "sans-serif"]
                    },
                    borderRadius: {
                        DEFAULT: "0.25rem",
                        lg: "0.5rem",
                        xl: "0.75rem",
                        full: "9999px"
                    }
                }
            }
        };
    </script>
    <style>
        .material-symbols-outlined {
            font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
        }

        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #cbd5e1;
            border-radius: 20px;
        }
        .dark .custom-scrollbar::-webkit-scrollbar-thumb {
            background-color: #475569;
        }

        /* 表格样式 */
        .data-table {
            border-collapse: separate;
            border-spacing: 0;
        }

        .data-table th,
        .data-table td {
            border: 1px solid #e2e8f0;
            padding: 8px 12px;
            text-align: center;
            font-size: 12px;
        }

        .dark .data-table th,
        .dark .data-table td {
            border-color: #334155;
        }

        .data-table th {
            background-color: #f8fafc;
            font-weight: 600;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .dark .data-table th {
            background-color: #1e293b;
        }

        .data-table tbody tr:hover {
            background-color: #f1f5f9;
        }

        .dark .data-table tbody tr:hover {
            background-color: #1e293b;
        }

        /* 红色标注样式 */
        .red-note {
            color: #ef4444;
            font-size: 11px;
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark font-display text-slate-900 dark:text-slate-100 min-h-screen flex flex-col">

<!-- 头部导航 -->
<header class="border-b border-slate-200 dark:border-slate-800 bg-white dark:bg-[#161e27] sticky top-0 z-50 shrink-0">
    <div class="max-w-[1440px] mx-auto px-6 h-16 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <a href="index.html" class="flex items-center gap-3 hover:opacity-80 transition-opacity">
                <div class="bg-primary p-1.5 rounded-lg flex items-center justify-center">
                    <span class="material-symbols-outlined text-white text-2xl" data-icon="settings_input_component">settings_input_component</span>
                </div>
                <h1 class="text-lg font-bold tracking-tight text-slate-800 dark:text-white">管网多模态全过程智慧探测系统</h1>
            </a>
            <span class="text-slate-300 dark:text-slate-600">/</span>
            <span class="text-sm font-medium text-slate-900 dark:text-white truncate max-w-[200px]" id="breadcrumb-project-name">加载中...</span>
        </div>
        <div class="flex items-center gap-6">
            <div class="flex items-center gap-3 border-r border-slate-200 dark:border-slate-800 pr-6 mr-2">
                <div class="text-right">
                    <p class="text-sm font-bold leading-none mb-1">陈明</p>
                    <p class="text-[11px] text-slate-500 dark:text-slate-400 font-medium">基础设施部</p>
                </div>
            </div>
            <button class="p-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-800 rounded-full transition-colors">
                <span class="material-symbols-outlined" data-icon="notifications">notifications</span>
            </button>
        </div>
    </div>
</header>

<!-- 主内容区域 -->
<main class="flex-1 max-w-[1440px] w-full mx-auto px-6 pt-6 pb-12">
    <!-- 项目级头部区域 -->
    <div class="mb-4 space-y-2">
        <!-- 标题与操作 -->
        <div class="flex justify-between items-center h-10">
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-3">
                    <h2 class="text-xl font-bold text-slate-800 dark:text-white" id="project-title">加载中...</h2>
                    <div class="flex items-center gap-2 text-xs text-slate-500 border-l border-slate-200 dark:border-slate-700 pl-3">
                        <span class="font-mono bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded text-slate-600 dark:text-slate-400 scale-90" id="project-id">PROJ-???</span>
                        <span class="flex items-center gap-0.5 scale-90 origin-left"><span class="material-symbols-outlined text-sm">location_on</span> <span id="project-address">...</span></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 一级菜单 (Top Tabs) -->
        <div class="border-b border-slate-200 dark:border-slate-800">
            <nav class="-mb-px flex space-x-6" aria-label="Tabs">
                <a href="#" class="border-primary text-primary flex items-center gap-1.5 whitespace-nowrap pb-2 px-1 border-b-2 font-bold text-sm">
                    <span class="material-symbols-outlined text-base">work</span>
                    工作平台
                </a>
                <a href="#" class="border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-200 hover:border-slate-300 flex items-center gap-1.5 whitespace-nowrap pb-2 px-1 border-b-2 font-medium text-sm transition-colors">
                    <span class="material-symbols-outlined text-base">menu_book</span>
                    知识中心
                </a>
            </nav>
        </div>
    </div>

    <!-- 页面布局：左侧导航 + 右侧内容 -->
    <div class="flex gap-4 items-start h-[calc(100vh-10rem)]">
        <!-- 二级菜单 (Left Sidebar) -->
        <nav class="w-16 shrink-0 space-y-2 sticky top-0 flex flex-col items-center py-2 bg-white dark:bg-[#161e27] rounded-lg border border-slate-200 dark:border-slate-800 h-full z-50">
            <a href="project-detail.html" class="w-10 h-10 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-700 dark:hover:text-slate-200 flex items-center justify-center rounded-lg transition-colors group relative" title="项目">
                <span class="material-symbols-outlined text-[24px]">dashboard</span>
                <span class="absolute left-full ml-2 px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50">项目</span>
            </a>
            <a href="#" class="w-10 h-10 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-700 dark:hover:text-slate-200 flex items-center justify-center rounded-lg transition-colors group relative" title="勘探">
                <span class="material-symbols-outlined text-[24px]">explore</span>
                <span class="absolute left-full ml-2 px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50">勘探</span>
            </a>
            <a href="#" class="w-10 h-10 bg-primary/10 text-primary flex items-center justify-center rounded-lg transition-colors group relative" title="数据">
                <span class="material-symbols-outlined text-[24px]">database</span>
                <span class="absolute left-full ml-2 px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50">数据</span>
            </a>
            <a href="#" class="w-10 h-10 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-700 dark:hover:text-slate-200 flex items-center justify-center rounded-lg transition-colors group relative" title="模型">
                <span class="material-symbols-outlined text-[24px]">view_in_ar</span>
                <span class="absolute left-full ml-2 px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50">模型</span>
            </a>
            <a href="#" class="w-10 h-10 text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-slate-700 dark:hover:text-slate-200 flex items-center justify-center rounded-lg transition-colors group relative" title="报告">
                <span class="material-symbols-outlined text-[24px]">description</span>
                <span class="absolute left-full ml-2 px-2 py-1 bg-slate-800 text-white text-xs rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-50">报告</span>
            </a>
        </nav>

        <!-- 内容区域 -->
        <div class="flex-1 min-w-0 h-full overflow-hidden relative">
            <!-- 数据视图 -->
            <div class="w-full h-full flex gap-4">
                <!-- 左侧数据操作菜单 (25%) -->
                <div class="w-[25%] bg-white dark:bg-[#161e27] rounded-lg border border-slate-200 dark:border-slate-800 flex flex-col">
                    <div class="p-3 border-b border-slate-100 dark:border-slate-800 flex justify-between items-center">
                        <h3 class="font-bold text-slate-800 dark:text-white text-sm flex items-center gap-2">
                            <span class="material-symbols-outlined text-primary text-base">category</span>
                            数据操作菜单
                        </h3>
                    </div>
                    <div class="flex-1 overflow-y-auto p-3 space-y-4 custom-scrollbar">

            <!-- 右侧表格内容区 -->
            <div class="flex-1 flex flex-col">
                <!-- 表格标题栏 -->
                <div class="px-4 py-3 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between bg-slate-50 dark:bg-slate-900/30">
                    <div class="flex items-center gap-3">
                        <h3 class="text-sm font-bold text-slate-900 dark:text-white">综合地下管线成果表</h3>
                        <span class="text-xs text-slate-500 dark:text-slate-400">共 <span class="font-semibold text-primary">300</span> 条记录</span>
                    </div>
                    <div class="flex items-center gap-2">
                        <button class="px-3 py-1.5 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded text-xs font-medium transition-colors flex items-center gap-1">
                            <span class="material-symbols-outlined text-sm">edit</span>
                            修改
                        </button>
                        <button class="px-3 py-1.5 text-slate-600 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-800 rounded text-xs font-medium transition-colors flex items-center gap-1">
                            <span class="material-symbols-outlined text-sm">add_circle</span>
                            新增
                        </button>
                        <button class="px-3 py-1.5 text-primary hover:bg-primary/10 rounded text-xs font-medium transition-colors flex items-center gap-1">
                            <span class="material-symbols-outlined text-sm">download</span>
                            导出
                        </button>
                    </div>
                </div>

                <!-- 表格滚动容器 -->
                <div class="flex-1 overflow-auto custom-scrollbar">
                    <table class="data-table w-full min-w-[2000px]">
                        <thead>
                            <tr>
                                <th rowspan="3" class="w-16">序号</th>
                                <th rowspan="3" class="w-24">管线编号</th>
                                <th rowspan="3" class="w-20">起点编号</th>
                                <th rowspan="3" class="w-24">建筑长度<br/>(m)</th>
                                <th colspan="2" rowspan="2" class="w-32">管线规格</th>
                                <th rowspan="3" class="w-20">材质</th>
                                <th colspan="3" rowspan="2" class="w-40">管线埋深(m)</th>
                                <th colspan="4" class="bg-slate-100">平面坐标(m)</th>
                                <th colspan="2" class="bg-slate-100">埋深(m)</th>
                                <th rowspan="3" class="w-24">备注</th>
                                <th rowspan="3" class="w-24">民地坐标</th>
                            </tr>
                            <tr>
                                <th colspan="2" class="bg-slate-100">起点</th>
                                <th colspan="2" class="bg-slate-100">终点</th>
                                <th rowspan="2" class="bg-slate-100 w-20">起点埋深</th>
                                <th rowspan="2" class="bg-slate-100 w-20">终点埋深</th>
                            </tr>
                            <tr>
                                <th class="w-20">特征</th>
                                <th class="w-20">附属物</th>
                                <th class="w-16">X</th>
                                <th class="w-16">Y</th>
                                <th class="w-20">中/左/右</th>
                                <th class="w-20">顶/底/中心/盖板</th>
                                <th class="bg-slate-100 w-20">X坐标</th>
                                <th class="bg-slate-100 w-20">Y坐标</th>
                                <th class="bg-slate-100 w-20">方式</th>
                                <th class="bg-slate-100 w-20">中/左</th>
                            </tr>
                        </thead>
                        <tbody id="data-table-body">
                            <!-- 数据行将通过 JavaScript 动态生成 -->
                        </tbody>
                    </table>
                </div>

                <!-- 分页和底部操作栏 -->
                <div class="px-4 py-3 border-t border-slate-200 dark:border-slate-700 flex items-center justify-between bg-slate-50 dark:bg-slate-900/30">
                    <div class="text-xs text-slate-600 dark:text-slate-400">
                        共 <span id="total-records" class="font-semibold text-slate-900 dark:text-white mx-0.5">30</span> 页记录
                    </div>
                    <div class="flex items-center gap-3">
                        <!-- 分页按钮 -->
                        <div class="flex items-center gap-1" id="pagination-container">
                            <button class="px-2.5 py-1 text-xs border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" data-page="prev">
                                &lt;
                            </button>
                            <button class="px-2.5 py-1 text-xs border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" data-page="1">1</button>
                            <button class="px-2.5 py-1 text-xs border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" data-page="2">2</button>
                            <button class="px-2.5 py-1 text-xs border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" data-page="3">3</button>
                            <span class="px-1 text-slate-400">...</span>
                            <button class="px-2.5 py-1 text-xs border border-primary bg-primary text-white rounded font-semibold" data-page="10">10</button>
                            <span class="px-1 text-slate-400">...</span>
                            <button class="px-2.5 py-1 text-xs border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" data-page="30">30</button>
                            <button class="px-2.5 py-1 text-xs border border-slate-200 dark:border-slate-700 rounded hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors" data-page="next">
                                &gt;&gt;
                            </button>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="text-xs text-slate-600 dark:text-slate-400">跳至</span>
                            <input type="number" id="jump-to-page" class="w-14 px-2 py-1 text-xs border border-slate-200 dark:border-slate-700 rounded bg-white dark:bg-slate-800 text-center focus:ring-1 focus:ring-primary focus:border-primary outline-none" value="10" min="1" max="30">
                            <span class="text-xs text-slate-600 dark:text-slate-400">页</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<script type="module">
    // 数据管理模块
    class PipelineDataManager {
        constructor() {
            this.currentPage = 10;
            this.totalPages = 30;
            this.currentType = 'water';
            this.data = this.generateMockData();
            this.init();
        }

        init() {
            this.bindEvents();
            this.renderTable();
            this.updatePagination();
        }

        // 生成模拟数据
        generateMockData() {
            const data = [];
            for (let i = 1; i <= 300; i++) {
                data.push({
                    id: i,
                    pipelineNo: `GS-${String(i).padStart(4, '0')}`,
                    startPointNo: `D${i}`,
                    length: (Math.random() * 50 + 10).toFixed(2),
                    spec: 'DN200',
                    attachment: '',
                    material: 'PE',
                    depthX: (Math.random() * 2 + 1).toFixed(2),
                    depthY: (Math.random() * 2 + 1).toFixed(2),
                    depthType: '中',
                    depthPosition: '顶',
                    startX: (Math.random() * 1000 + 2000).toFixed(2),
                    startY: (Math.random() * 1000 + 3000).toFixed(2),
                    endX: (Math.random() * 1000 + 2000).toFixed(2),
                    endY: (Math.random() * 1000 + 3000).toFixed(2),
                    startDepth: (Math.random() * 2 + 1).toFixed(2),
                    endDepth: (Math.random() * 2 + 1).toFixed(2),
                    note: i % 5 === 0 ? '<span class="red-note">埋藏之前/记录不详/记录可信/记录详情/无/残缺/不完整</span>' : '',
                    civilCoord: ''
                });
            }
            return data;
        }

        // 渲染表格
        renderTable() {
            const tbody = document.getElementById('data-table-body');
            const start = (this.currentPage - 1) * 10;
            const end = start + 10;
            const pageData = this.data.slice(start, end);

            tbody.innerHTML = pageData.map(row => `
                <tr>
                    <td>${row.id}</td>
                    <td>${row.pipelineNo}</td>
                    <td>${row.startPointNo}</td>
                    <td>${row.length}</td>
                    <td>${row.spec}</td>
                    <td>${row.attachment}</td>
                    <td>${row.material}</td>
                    <td>${row.depthX}</td>
                    <td>${row.depthY}</td>
                    <td>${row.depthType}</td>
                    <td>${row.depthPosition}</td>
                    <td class="bg-slate-50">${row.startX}</td>
                    <td class="bg-slate-50">${row.startY}</td>
                    <td class="bg-slate-50">${row.endX}</td>
                    <td class="bg-slate-50">${row.endY}</td>
                    <td class="bg-slate-50">${row.startDepth}</td>
                    <td class="bg-slate-50">${row.endDepth}</td>
                    <td>${row.note}</td>
                    <td>${row.civilCoord}</td>
                </tr>
            `).join('');
        }

        // 更新分页
        updatePagination() {
            document.getElementById('total-records').textContent = this.totalPages;
            document.getElementById('jump-to-page').value = this.currentPage;
            document.getElementById('jump-to-page').max = this.totalPages;
        }

        // 绑定事件
        bindEvents() {
            // 管线类型切换
            document.querySelectorAll('[data-type]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    document.querySelectorAll('[data-type]').forEach(b => b.removeAttribute('data-active'));
                    e.target.setAttribute('data-active', 'true');
                    this.currentType = e.target.dataset.type;
                    this.renderTable();
                });
            });

            // 分页按钮
            document.querySelectorAll('[data-page]').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const page = e.target.dataset.page;
                    if (page === 'prev' && this.currentPage > 1) {
                        this.currentPage--;
                    } else if (page === 'next' && this.currentPage < this.totalPages) {
                        this.currentPage++;
                    } else if (!isNaN(page)) {
                        this.currentPage = parseInt(page);
                    }
                    this.renderTable();
                    this.updatePagination();
                });
            });

            // 跳转页面
            document.getElementById('jump-to-page').addEventListener('change', (e) => {
                const page = parseInt(e.target.value);
                if (page >= 1 && page <= this.totalPages) {
                    this.currentPage = page;
                    this.renderTable();
                    this.updatePagination();
                }
            });
        }
    }

    // 初始化
    document.addEventListener('DOMContentLoaded', () => {
        new PipelineDataManager();
    });
</script>

</body>
</html>
